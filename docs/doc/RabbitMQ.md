# RabbitMQ面试题

### 常见的消息模式

非路由模式：

- 简单模式（Simple）：
- 竞争模式（Worker）：

路由模式：

- 发布订阅模式：把消息发送到和Exchange绑定的Queue中
- 路由模式：把消息路由到那些binding key与routing key完全匹配的Queue中。
- 主题模式：根据key的规则模糊匹配到对应的队列，由队列的监听消费者接收消息消费
- header头：只要消息的header和Exchange的健值匹配就发给这个Exchange，最终由消费者绑定处理
- RPC：同步等待处理消息

### 消费者消费能力不足怎么办

- 消息的批量消费
- 生产者开启多个线程处理
- 对于优先级较低的消息进行服务降级
- 在生产者端做流量限流
- 增加更多的消费者
- 做MQ的高可用方案

### 如何保证消息成功投递并且成功消费

confirm机制保证消息投递成功，ack机制保证消息成功消费。

### 消息消费失败怎么办

发送到死信（ttl）队列，重新消费，如果失败次数到达一定数量，则将错误报文信息发给业务端处理。

### 如何保证消息顺序消费

首先要保证消息顺序放在一个queue中，就可以顺序消费，因为底层是队列的数据结构。（问题是只有一个消费者消费queue造成性能下降，可以采用多个queue对应多个消费者去解决）









